(function(){var n="0.1.37",a,t="undefined",e=25,r=parseInt(1e3/e),i=a,o={"function":!0,object:!0},s={DEBUG_MODE:!1,counterID:"424",instanceID:"externalConf###Instanceid"},u=function(n){return typeof n!==t},c="HISTATS_CANVAS_DEBUG_ON";s.DEBUG_MODE=u(window[c])&&1==window[c];var f=function(){return s.instanceID},l="_HistatsCounterGraphics_",d,A=function(){return l+s.counterID},h=function(n){return!("string"!=typeof n||""==n)},m=function(){try{s.DEBUG_MODE&&u(console)&&console.log.apply(this,arguments)}catch(n){}},v=function(t,e){var o=t||{};try{var c=function(n){var a="autostart";return"undefined"!=typeof n[a]&&n[a]===!0},f={ANIMATION_RUNNING_STATUS:!0,ANIMATION_STARTED:!1,AUTOSTART:c(o),_STOPPED:!1,INSTANCE_ID:"-"+parseInt(1e4*Math.random())},l=function(){return f.INSTANCE_ID},h=100,v=1,p=function(){return e.document},g=function(n){return u(n)&&!!p().getElementById(n)},b=function(n){i=e.setTimeout(n,r)},w=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||b,T=e["Date"]||{},x=function(n,a){for(var t in n)a.hasOwnProperty(t)&&(a[t]=n[t])};o.getInstanceID=l;var y=A();o.IS_HISTATS_CANVAS=!0,o.globalObjectName=y,o.$window=e;var C=function(n){return g(n)?p().getElementById(n):a},S={w:0,h:0,yBase:0,xBase:0,hasShadow:!1,hasLabel:!1,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:1,doMouseOverOut:1},I={msLastFrameDrawn:0,msPerFrame:r,frameCounter:0,isInAnimationTransition:!1,animation_duration_inFrames:20,waitframesBetweenTwoAnimations:80,framesBetweenTwoAnimations:100,currentLoopFrame:0,autoTriggerTextChange_onFrame:a,customization:{}},B={domCanvasObject:null,canvas2dContext:null,canvasProperties:S},_=function(){var n={},t=n.hasOwnProperty,e=0,r=0,i={blockMessages:!1,recordMessages:!1,messageLog:[],printMessages:!1,messagePassedCount:0,subscribersCount:0,topicsCount:0,_topics:n},o=function(a){return t.call(n,a)},s=function(a){return i.printMessages&&console.log(l(),"addTopic",a),r++,i.topicsCount++,r>50&&m(l(),"Lot of topics registered!",a),n[a]=[]},u=function(a){return n[a]},c=function(a,t,r){i.printMessages&&console.log(l(),"subscribe",a,t,r),i.recordMessages&&i.messageLog.push(["subscribe",a,t,r]),r=r||h,o(a)||s(a);var c=u(a).push({callback:t,priority:t})-1;return e++,i.subscribersCount++,e>50&&m(l(),"Lot of topics registered!",a),{remove:function(){delete n[a][c]}}},f=function(n,a){var t="no-topic-found";n!=t&&d(t,{topic:n,info:a})},d=function(t,e){return i.messagePassedCount++,i.printMessages&&console.log(l(),"publish",t,e),i.recordMessages&&i.messageLog.push(["publish",t,e]),i.blockMessages?void 0:o(t)?(n[t].slice().sort(function(n,a){return n.priority-a.priority}).forEach(function(n){n.callback(e!=a?e:{})}),void 0):(f(t,e),void 0)},A=function(n,a){w(function(){d(n,a)})};return{subscribe:c,publish:d,publishAsync:A,debugObj:i}}(),N=function(){return s.counterID},O=function(){var n="siteId";return o[n]=o[n]||0},F=function(){var n="main_div_name";return o[n]||"histats_counter_"+O()+"_"+N()},M=[],E=function(){return d=F(),d},P=function(){return E()+"_canvas"},R=function(){return"http://www.histats.com/viewstats/?sid="+O()+"&ccid="+N()},k=function(){e.location=R()},U=function(){if(1==B.canvasProperties.doMouseOverOut){var n=z().canvasProperties;n.yBase=2,n.xBase=2,n.shadowOffsetX=0,n.shadowOffsetY=0}z().domCanvasObject.style.cursor="pointer"},L=function(){if(1==B.canvasProperties.doMouseOverOut){var n=z().canvasProperties;n.yBase=0,n.xBase=0,n.shadowOffsetX=2,n.shadowOffsetY=2}},V=function(){var n=z(),a=n.canvasProperties,t=n.canvas2dContext;t.shadowOffsetX=a.shadowOffsetX,t.shadowOffsetY=a.shadowOffsetY,t.shadowBlur=a.shadowBlur,t.shadowColor="rgba(0,0,0,0.2)"},D=function(){return C(E())},j=function(){var n=!!D();return n},W=function(){try{if(!j())return _.publish("error",{msg:"validateDomcontainer not found"}),void 0;var n=D(),a=z().canvasProperties,t='<canvas id="'+P()+'" width="'+a.w+'" height="'+a.h+'" ></canvas>',r='<a href="'+R()+'" target="_blank">'+t+"</a>";n.innerHTML=r,z().domCanvasObject=C(P());var i=z().domCanvasObject;z().canvas2dContext=i.getContext("2d"),"addEventListener"in e?(i.addEventListener("mouseover",function(){U()}),i.addEventListener("mouseout",function(){L()})):i.onclick=function(){k()}}catch(o){m(l(),"drawCanvas",o)}},Y=function(){try{if(f.ANIMATION_STARTED)return;if(f._STOPPED)return;_.publish("draw-callback-requested-reconfiguration",{}),_.publish("starting_pre",{context:o}),f.ANIMATION_STARTED=!0,_.publish("started",{context:o}),_.publish("drawcanvas_pre",{context:o}),W(),_.publish("drawcanvas_post",{context:o}),X(),_.publish("animationLoop_started",{context:o})}catch(n){m(l(),"startNow",n,n.message)}},G=function(n,a,t){a.addEventListener?a.addEventListener(n,t,!1):a.attachEvent?a.attachEvent("on"+n,t):a[n]=t},H=function(){try{_.publish("appendedStart",{context:o,type:"animFrame"}),w(Y)}catch(n){m(l(),"startAsap",n.message,n)}},J=function(n,a){M.push({name:n,callback:a})},q=function(){},Z=function(){M.forEach(function(n){n.callback(o.getCanvas2dContext(),I,z())})},Q=function(){u(i)&&e.clearTimeout(i)},X=function(){f._STOPPED||w(function(){an(Z),f.ANIMATION_RUNNING_STATUS&&X()})};_.subscribe("setAnimationProperties",function(n){x(n,I)}),_.subscribe("draw-callback-publish-reconfiguration",function(n){try{n.canvasCallbacks.forEach(function(n){M.push({name:n.name,callback:n.cb,priority:n.priority})}),M=M.slice().sort(function(n,a){return n.priority-a.priority})}catch(a){m(l(),"animationLoop",a.message,a)}}),_.subscribe("configuration-changed",function(n){M=[],_.publish("draw-callback-requested-reconfiguration",{})});var K=function(n){var a=n!=f.ANIMATION_RUNNING_STATUS;return a&&(0==f.ANIMATION_RUNNING_STATUS&&1==n,1==f.ANIMATION_RUNNING_STATUS&&0==n&&Q(),f.ANIMATION_RUNNING_STATUS=n),a},z=function(){return B},$=function(){var n=!1;0==I.frameCounter&&_.publish("FIRST-FRAME",{});var a=T.now(),t=a-I.msLastFrameDrawn;if(t>I.msPerFrame){var e=t%I.msPerFrame;I.msLastFrameDrawn=a-e,n=!0}return n},nn=function(){if(!(I.animation_duration_inFrames<1)){var n=I.animation_duration_inFrames+I.waitframesBetweenTwoAnimations;I.currentLoopFrame=I.frameCounter%n;var a=0==I.currentLoopFrame,t=I.currentLoopFrame>=I.animation_duration_inFrames;a&&(I.isInAnimationTransition=!0,_.publish("drawing-triggered-animation-start",I)),t&&I.isInAnimationTransition&&(I.isInAnimationTransition=!1,_.publish("drawing-triggered-animation-end",I))}},an=function(n){var a=$();a&&(I.frameCounter++,nn(),n())},tn=function(n){return n(o.getCanvas2dContext())},en=function(){var n=17,a=2,t=1,e=z().canvasProperties,r=0;e.hasShadow&&(r=r+a+t),e.hasLabel&&(e.h=e.h+n),e.w=e.w+r,e.h=e.h+r},rn=function(n){x(n,z().canvasProperties),en()};_.subscribe("setCanvasProperties",rn,10);var on=function(){o.onCanvas2dContext(function(n){var a=z().canvasProperties;n.clearRect(0,0,a.w,a.h),a.hasShadow&&V()})};_.subscribe("clear-canvas-rectangle",on,10);var sn=function(n,a){z().hasShadow&&(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowColor="transparent")},un=function(n,t){t.autoTriggerTextChange_onFrame!==a&&t.currentLoopFrame==t.autoTriggerTextChange_onFrame&&_.publish("drawing-change-text",{})},cn=function(n){_.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:sn,priority:14,name:"stopApplyingShadowOnCanvas"},{cb:un,priority:5,name:"autoUpdateText"}]})};_.subscribe("draw-callback-requested-reconfiguration",cn,15),o.__CODE_VERSION=n,o.getCanvasObject=z,o.getCanvas2dContext=function(){return z().canvas2dContext},o.onCanvas2dContext=tn,o.getXYCanvas=function(){return{x:z().canvasProperties.xBase,y:z().canvasProperties.yBase}},o.addDrawCallback=J,o.getCanvasProperties=function(){return z().canvasProperties},o.setCanvasProperties=function(n){for(var a in n)n.hasOwnProperty(a)&&(B.canvasProperties[a]=n[a])},o.updateCanvasProperties=function(n){o.setCanvasProperties(n(z().canvasProperties))},o.getAnimationFrames=function(){return I.frameCounter},o.getAnimationControl=function(){return I},o.setAnimationControl=function(n){for(var a in n)n.hasOwnProperty(a)&&(I[a]=n[a])},o.start=H,o.changeRunningStatus=K,o.getRunningStatus=function(){return f.ANIMATION_RUNNING_STATUS},o.eventBus=_,o.getDebugMode=function(){return s.DEBUG_MODE},function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var t=n.statsText={},e={xBase:0,yBase:0},r=function(){return e},i=function(){var a=n.getXYCanvas();return e.xBase=a.x,e.yBase=a.y,e},o=[],s={stats_values:[],indexStatToShow:0,drawValueCallback:a,drawValueCallbackWithValue:a,drawMetricCallback:a},u=25,c=0,f=function(){return c%u==1},l=function(n){o=n};n.eventBus.subscribe("set-textbox-style",function(a){o=a,n.eventBus.publish("configuration-changed",{})}),n.eventBus.subscribe("canvas-drawValueFunction",function(n){"undefined"!=typeof n["transformationFunction"]&&(s.drawValueCallback=n["transformationFunction"])});function d(n,a,t,e){n=(n+"").replace(/[^0-9+\-Ee.]/g,"");var r=isFinite(+n)?+n:0,i=isFinite(+a)?Math.abs(a):0,o="undefined"==typeof e?",":e,s="undefined"==typeof t?".":t,u="",c=function(n,a){var t=Math.pow(10,a);return""+(Math.round(n*t)/t).toFixed(a)};return u=(i?c(r,i):""+Math.round(r)).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(u[1]||"").length<i&&(u[1]=u[1]||"",u[1]+=new Array(i-u[1].length+1).join("0")),u.join(s)}var A=function(t){if(s.stats_values=t,s.drawValueCallback!=a){var e=t[0].value;s.drawValueCallbackWithValue=s.drawValueCallback(e)}n.eventBus.publish("configuration-changed",{})},h=function(){return s.stats_values},m=function(n){if(n===s.stats_values)return!1;if(typeof n==typeof[])for(var a in n)if(n.hasOwnProperty(a)&&typeof n[a]!=typeof{})return!1;return!0},v=function(){return n.globalObjectName+"_setValues"},p=function(){if(f()){var a=v();if("undefined"!=typeof n.$window&&"undefined"!=typeof n.$window[a]){var t=n.$window[a];m(t)&&A(t)}}},g=function(n){return(""+n).match(/^\s*[0-9]+\s*$/)?d(n,0,""," "):n},b=function(a,t){return function(e){e.shadowColor="transparent",e.font=a.name.font,e.textAlign=a.name.align,e.fillStyle=a.name.color,e.fillText(t.name,a.name.x+r().xBase,a.name.y+r().yBase),e.font=a.value.font,e.textAlign=a.value.align,e.fillStyle=a.value.color;var i=t.value;try{i=g(t.value)}catch(o){n.debug(o)}e.fillText(i,a.value.x+r().xBase,a.value.y+r().yBase)}},w=function(){s.indexStatToShow+=o.length,s.indexStatToShow>=s.stats_values.length&&(s.indexStatToShow=0)},T=!1;n.eventBus.subscribe("draw-hideText",function(n){T=!0},11),n.eventBus.subscribe("draw-unHideText",function(n){T=!1},11);var x=function(n){if(!T){var a,t,e=s.indexStatToShow,r=h(),i=r.length;r.length>o.length&&(i=o.length);for(var u=0;i>u&&(e>=r.length&&(e=0),r[e]);u++)a=o[u],t=r[e],b(a,t)(n),e++}},y=function(n,t){return c++,p(),i(),s.drawValueCallbackWithValue!=a?(s.drawValueCallbackWithValue(n),void 0):(x(n),void 0)},C=function(a){n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:y,priority:15,name:"show_stats_draw"}]})};n.eventBus.subscribe("draw-callback-requested-reconfiguration",C,11);var S=n.eventBus.subscribe("drawing-change-text",w,10);t.draw=y,t.setBoxes=l,t.setValues=A}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var a=new Image,t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAAARCAMAAACW/GBVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAYxQTFRFAAAAmZmZnJycmpqamZmZmZmZmJiYmJiYmZmZKSkpMzMzNDQ0NTU1Pj4+QEBAQUFBQkJCRUVFSUlJTExMTU1NTk5OU1NTVlZWV1dXWFhYWVlZWlpaW1tbX19fYWFhYmJiY2NjaWlpa2trbW1tcHBwcnJyc3NzdXV1d3d3eXl5e3t7fn5+f39/gYGBgoKCg4ODhISEhYWFhoaGh4eHiIiIioqKi4uLjIyMjY2Njo6OlJSUlZWVl5eXmJiYmZmZmpqanJycnZ2dnp6eoKCgoaGhoqKio6OjpaWlpqamp6enqKioqampqqqqq6urrKysra2trq6ur6+vsLCwsbGxsrKys7OztLS0tbW1tra2t7e3uLi4ubm5urq6u7u7vLy8vb29vr6+v7+/wMDAwcHBwsLCw8PDxMTExcXFxsbGx8fHyMjIycnJysrKy8vLzMzMzc3Nzs7Oz8/P0NDQ0dHR0tLS09PT1NTU1dXV1tbW19fX2NjY2dnZ2tra29vb3Nzc3d3d3t7e4eHh4uLi5OTkNNJLDwAAAAl0Uk5TAA8fP19/n7/v4kaK0QAAAp1JREFUOMut0Ptb0lAYB/BVWn3BlDJiInahqxGKaXYDTERIQRggyAaTu4C4oXBQTO36j/eOCc/T0y/+wGfsjHfn7Luzl/MFhszn5QIXQ9alzG9D1qHM0yFjlHk8ZEeUyS5ZLHE2a5ntPHzV1spWMFhr6TMtORhrsatSKfNI1wE2OjymdgCm1S0geHg5Nw++dXRVDcps6o6B8PE0rBfP37CmUl7OAW8lRVl3ppXDRdwPKk0lsqxqK5WIM6IoJfdyme6V3O6yVjcH6pSp6Gifk7wB1jOg3YgYEAYwX75H48vWEo1NxQ5LU1tpp2o9agAM75WIdqHargzseTmvrKujh6dvruUfYJx6YP7wBMZpwOfCGF9dAWbLspxdAKyPlTswmWHIzMBkAmhNQB6gTElXpQ19nOhlVotA9AQQmBHBXy8w54KtW3HAxnKSJM/A+ZNtAd3fJviNSG7A/McGhzRAmTu6CuWc2cAfAhWB3ntghvdgHK7iIlxfMFnN2cHviY6l3FM8qoWTtFo0YgPYDMHKpuDcGfBy60ldiZpUnwLfpG8HjPXSM8ChNXIB8zJdXgOu3Dt6WZCKu/tWrVHjp/TQOvgGD2eyL3ST88d1BWC1YIFFBVRMpPNSdRpO5gAWMdf4NAYXHEpGgDG+/3kMhtWGjdqYog2srcFSt8AZ7/OPcCuhaI/EugVJPVPLjNV3u5VEbLet5grq9zJr1+T98/LuiSrF88WDnNg4Z6xQZO0fnVKedSsVphbUk2r00tfb17iRFb8/TKJpMRZNSal4Op2URCG0GU1lksJ2JiumE9F4Rs6I21uhWCYjbMUlWYwJqWw2JQhpMZFIp2IpMRHuCfhuXec47sboqPdfHjqI2+Nx9/97ej/tdGsT/eE/N0co8S/qzsLhxyWGugAAAABJRU5ErkJggg==",e={x:0,y:0,w:83,h:17,yMin:0,yMax:0,pixelPerFrame:0},r=function(n){var a=z().canvasProperties,t=0;a.hasShadow&&(t=3),e.x=(a.w-t)/2-e.w/2,e.yMin=a.h-t-2*e.h,e.yMax=a.h-t-e.h,e.pixelPerFrame=e.h/(n/2)},i=!1,o=function(){i||(i=!0,a.onload=function(){return!0},a.src=t)},s=function(a,t){o(),n.eventBus.publish("clear-canvas-rectangle",{}),t.isInAnimationTransition&&(r(t.animation_duration_inFrames),u(a,t))},u=function(t,r){var i=n.getXYCanvas(),o=c(r),s=e.pixelPerFrame*o;e.y=Math.max(Math.min(e.y+s,e.yMax),e.yMin),t.drawImage(a,i.x+e.x,i.y+e.y)},c=function(n){var a=n,t=0;if(!a.isInAnimationTransition)return t;var e=a.currentLoopFrame<a.animation_duration_inFrames/2,r=!e;return e&&(t=1),r&&(t=-1),t},f=function(a){n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:s,priority:9,name:"start"}]})};n.eventBus.subscribe("draw-callback-requested-reconfiguration",f,11)}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var t={main:"",source:a,loaded:!1};t.main="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAAA5CAMAAAALOVWFAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAACoUExURQlBlDqD8TmB7R9SnwATLgE1gjuF9QASLgA1gT6K/R5Qmx1OlxxLkxpJkCxpxitnwiplvjd+6ihjuydgtjZ85iZesjV54SRbrzR33SNZqzJ12iJXpyFVozFz1jBw0i9uzhlGixhEhy1syhdCgxVAgBQ+fBM7eBE5dBA2cA80bA4yaA0wZAstYQorXAkoWAgmVAYkUQUiTQQfSAIdRTyH+QEbQQAYPQAYPBnyZ0kAAAAJdFJOU9/////////f31JWEVYAAACESURBVFiF7ZjLCYAADMVi1Q28uIT7L+IYHjyJ4G8JiVCbBUI/j0KjMwmaXoOAyQICbosPbJdF+k6WrWxlK1vZ/mvLfE0Xi/Rb4tp2CwgYLdKnu2xv2TJviVubaxssIOC0SD83t5Nu3jLb3LmtFh8kwHuG+t/Q2QICE9vWHhYb0R5aAjoeZUK1RzscioEAAAAASUVORK5CYII=";var e=function(a){var e=t.source=new Image;e.onload=function(){t.loaded=!0,n.eventBus.publish("background-image-loaded",t),n.eventBus.publish("configuration-changed",{})},e.src=t.main};n.eventBus.subscribe("FIRST-FRAME",e,5),n.image_base64_src=t}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var t=n.counter={};t.ID="424",t.properties={w:109,h:57,hasShadow:!0,hasLabel:!0};var e=!1,r={backgroundImageObject:a},i={animation_duration_inFrames:30,autoTriggerTextChange_onFrame:15,waitframesBetweenTwoAnimations:110},o=[{name:{x:4,y:13,align:"left",color:"#ffffff",font:"11px Arial"},value:{x:105,y:13,align:"right",color:"#ffffff",font:"11px Arial"}},{name:{x:4,y:26,align:"left",color:"#ffffff",font:"11px Arial"},value:{x:105,y:26,align:"right",color:"#ffffff",font:"11px Arial"}},{name:{x:4,y:39,align:"left",color:"#ffffff",font:"11px Arial"},value:{x:105,y:39,align:"right",color:"#ffffff",font:"11px Arial"}},{name:{x:4,y:52,align:"left",color:"#ffffff",font:"11px Arial"},value:{x:105,y:52,align:"right",color:"#ffffff",font:"11px Arial"}}];n.eventBus.publish("set-textbox-style",o),n.eventBus.publish("setCanvasProperties",t.properties),n.eventBus.publish("setAnimationProperties",i);var s={alpha:{movementsPerFrame:1,min:0,max:100,cur:0}},u=function(n){var a=s;a.alpha.movementsPerFrame=(s.alpha.max-s.alpha.min)/(i.animation_duration_inFrames/2)};u(i.animation_duration_inFrames);var c=function(n){var a=n,t=0;if(!a.isInAnimationTransition)return t;var e=a.currentLoopFrame<a.animation_duration_inFrames/2,r=!e;return e&&(t=1),r&&(t=-1),t},f=function(n,a){var t=s,e=c(a);0==e?t.alpha.cur=t.alpha.min:l(n,e)},l=function(n,a){var t=s,e=t.alpha.movementsPerFrame*a;t.alpha.cur=Math.max(Math.min(t.alpha.cur+e,t.alpha.max),t.alpha.min),d(n)},d=function(a){var t=n.getXYCanvas(),e=s,r=e.alpha.cur/100,i={x:1,y:1,w:107,h:55},o=a.createLinearGradient(t.x+i.x,t.y+i.y,t.x+i.x,t.y+i.h);o.addColorStop(0,"rgba(62,138,253,"+r+")"),o.addColorStop(1,"rgba(0,24,60,"+r+")"),a.fillStyle=o,a.fillRect(t.x+i.x,t.y+i.y,i.w,i.h)},A=function(a,t){var e=n.getXYCanvas();a.drawImage(r.backgroundImageObject.source,e.x,e.y)},h=function(t){r.backgroundImageObject!=a&&n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:A,priority:10,name:"drawBackground"},{cb:f,priority:19,name:"drawAnimation"}]})};return n.eventBus.subscribe("draw-callback-requested-reconfiguration",h,13),n.eventBus.subscribe("background-image-loaded",function(n){r.backgroundImageObject=n},13),n}.call(o),f.AUTOSTART&&o.start()}catch(fn){}return o},p="base.js",g=window,b="_DEBUG_HISTATSCANVAS_RETURN_BUILDER";_value_RETURN_BUILDER=u(window[b])&&window[b]===!0,window[A()]=v,window["histats_canvascounters_"+p]=v}).call(this);